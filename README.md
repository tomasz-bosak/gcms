# Golf Course Management App

A Flask-based web application to manage a golf course, including player scores and positions.

## Features (Skeleton)
- Player tracking (name, current hole, current score).
- Score logging per hole.
- Dockerized environment with Flask and MariaDB.
- Database migrations with Flask-Migrate.

## Prerequisites
- Docker
- Docker Compose

## Setup and Running the Application

1.  **Clone the repository:**
    ```bash
    git clone <repository_url>
    cd <repository_directory>
    ```

2.  **Create and configure the environment file:**
    - Copy the example `.env.example` file (which you will create based on `.env`) to `.env`:
      ```bash
      cp .env.example .env
      ```
    - **Important:** Open `.env` and update the following variables with your actual secrets and desired settings:
        - `SECRET_KEY`: A strong, unique secret key for Flask.
        - `MYSQL_ROOT_PASSWORD`: Root password for the MariaDB instance.
        - `MYSQL_DATABASE`: Name of the database to be created (e.g., `golf_db`).
        - `MYSQL_USER`: Username for the application to connect to the database.
        - `MYSQL_PASSWORD`: Password for the application user.
        - `SQLALCHEMY_DATABASE_URI`: Should match the MariaDB settings, e.g., `mysql+mysqlconnector://golf_user:golf_password@db/golf_db`.

3.  **Build and run the application using Docker Compose:**
    ```bash
    docker-compose up --build -d
    ```
    The `-d` flag runs the containers in detached mode.

4.  **Initialize the database and run migrations:**
    - Once the containers are running, you need to set up the database schema. Execute the following commands in the `web` container:
      ```bash
      # Initialize Flask-Migrate (only needs to be run once for the project)
      docker-compose exec web flask db init

      # Generate the initial migration script based on your models
      docker-compose exec web flask db migrate -m "Initial migration; create player and score_log tables."

      # Apply the migration to the database
      docker-compose exec web flask db upgrade
      ```
    - **Note:** If `flask db init` reports that the migrations directory already exists (because we created it earlier), you can skip that specific command if it errors, or remove the `migrations` directory before running it if you want a clean init. The key is to run `migrate` and `upgrade`.

5.  **Access the application:**
    - Open your web browser and go to `http://localhost:5000`.

## Development

-   The application code is mounted as a volume in the `web` container, so changes to Python files should auto-reload the Flask development server.
-   To run Flask shell:
    ```bash
    docker-compose exec web flask shell
    ```
-   To view logs:
    ```bash
    docker-compose logs -f web
    docker-compose logs -f db
    ```

## Stopping the Application
```bash
docker-compose down
```
To remove volumes (including database data):
```bash
docker-compose down -v
```

## Project Structure
```
.
├── Dockerfile            # Defines the Python environment for the Flask app
├── docker-compose.yml    # Defines services, networks, and volumes for Docker
├── requirements.txt      # Python dependencies
├── run.py                # Entry point to run the Flask app, Flask CLI tasks
├── config.py             # Application configuration
├── golf_app/             # Main application package
│   ├── app/              # Core application module
│   │   ├── __init__.py   # Initializes Flask app, extensions, blueprints
│   │   ├── models.py     # SQLAlchemy database models
│   │   ├── routes.py     # Application routes (views)
│   │   ├── static/       # Static files (CSS, JS, images)
│   │   │   └── style.css
│   │   └── templates/    # HTML templates
│   │       ├── base.html
│   │       ├── overview.html
│   │       └── tee_box.html
│   └── migrations/       # Database migration scripts (generated by Flask-Migrate)
├── .env.example          # Example environment variables (created in this step)
└── README.md             # This file
```
